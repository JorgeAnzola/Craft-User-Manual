
{% extends "_layouts/cp" %}

{% do view.registerAssetBundle("roberskine\\usermanual\\assetbundles\\usermanual\\UserManualAsset") %}

{% set sectionSelected = (craft.userManual.settings.section is defined)
  ? craft.userManual.settings.section
  : "Homepage" %}

{% macro level(page) %}
  {% if page.level is defined and page.level > 1 %}
    {% for i in 2..page.level %}
      <div>
      <svg id="a" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 12 12"><path d="M4.56,7.31v-3.72c0-.24-.19-.43-.43-.43h-.64c-.27,0-.49.22-.49.49v4.08s0,.17,0,.17c0,.77.62,1.39,1.39,1.39h4.19c.24,0,.43-.19.43-.43v-.7c0-.24-.19-.43-.43-.43h-3.59c-.24,0-.43-.19-.43-.43Z" style="fill:currentColor; stroke-width:0px;"/></svg>
     </div>
    {% endfor %}
  {% endif %}
{% endmacro %}

{% set title = craft.userManual.name|t %}

{% if craft.userManual.settings.enabledSideBar %}
  {% set sidebar %}
    <nav id="user-manual-menu">
      {% set help = craft.entries.sectionId(sectionSelected).all() %}
      <ul>
        {% nav page in help %}
          {% set active = page.slug == craft.app.request.segments|last or loop.first and craft.app.request.segments|last == 'usermanual' %}
          <li id="{{ page.id }}">
            <a {% if active %}class="sel"{% endif %}
              href="{{ url('usermanual/' ~ page.uri) }}#{{ page.id }}">
              {{_self.level(page)}}{{page.title}}
            </a>
            {% ifchildren %}
                <ul>
                    {% children %}
                </ul>
            {% endifchildren %}
            </li>
        {% endnav %}
      </ul>
    </nav>
  {% endset %}
{% endif %}

{% set content %}
  <div id="user-manual">
    {{ getHelpDocument(sectionSelected)|raw }}
  </div>
{% endset %}
